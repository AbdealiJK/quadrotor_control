<?xml version="1.0"?>
<launch>
  <arg name="debug" default="false"/>

  <!-- Start Gazebo with wg world running in (max) realtime -->
  <include file="$(find hector_gazebo_worlds)/launch/start.launch">
    <!-- Use this argument to set which world file to open -->
    <arg name="world" value="$(find rl_env)/src/Env/HectorQuad/quad.world"/>
    <!-- Use this argument to decide whether gui should be enabled or not -->
    <arg name="gui" value="true"/>
    <!-- Extra args to gazebo -->
    <arg name="args" value=""/>
  </include>

  <!-- Spawn simulated quadrotor uav -->
  <include file="$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch" >
    <!-- Choose which model to use for the quadrotor -->
    <arg name="model" value="$(find rl_env)/src/Env/HectorQuad/quad.gazebo.xacro"/>
    <!-- Specifies which controller to use
      $(find hector_quadrotor_controller)/launch/controller.launch uses PID
    -->
    <!-- <arg name="controller_definition" value="$(find hector_quadrotor_controller)/launch/controller.launch"/> -->
    <!-- Initial position of the quadrotor -->
    <arg name="x" value="0.0"/>
    <arg name="y" value="0.0"/>
    <arg name="z" value="0.3"/>
    <!-- Motors -->
    <arg name="motors" default="robbe_2827-34_epp1045" />
    <!-- Not sure what these are : were defaultly suggested -->
    <arg name="tf_prefix" value="$(optenv ROS_NAMESPACE)"/>
    <arg name="use_ground_truth_for_tf" value="true" />
    <arg name="use_ground_truth_for_control" value="true" />
  </include>

  <!-- Start rviz visualization with preset config -->
  <!-- <node pkg="rviz" type="rviz" name="rviz" args="-d $(find rl_env)/src/Env/hectorQuad/quad.rviz"/> -->

  <!-- Start RLAgent and RLEnv without debug args -->
  <arg name="debug_arg" unless="$(arg debug)" value="" />
  <arg name="debug_arg" if="$(arg debug)" value="--prints" />

  <!-- Start RLAgent and RLEnv -->
  <node name="RLAgent" pkg="rl_agent" type="agent" args="--agent sarsa $(arg debug_arg)" output="screen" />

  <node name="RLEnvironment" pkg="rl_env" type="env" args="--env hectorquad $(arg debug_arg)" output="screen" />
</launch>
